Cartão - Credito ou debito.
Guardar todas as informações => exibir no final.

Agua

Ajustar menssagem de confirmar----

status@broadcast  --Status






LEFT JOIN su_destino_viagem dv ON dv.codigo = ap.coddestino
LEFT JOIN su_solicitacao_viagem sv ON sv.codigo = ap.codsolicitacao
LEFT JOIN un_unico AS prof ON prof.codigo = ap.id_unico_acompanhante
LEFT JOIN su_ambulancias_viagens AS av ON av.codigo = ap.codviagem
LEFT JOIN su_procedimentos AS proced ON proced.codigo_procedimento = sv.codprocedimento_acompanhante

LEFT JOIN su_destino_viagem dv ON dv.codigo = ap.coddestino
LEFT JOIN su_solicitacao_viagem sv ON sv.codigo = ap.codsolicitacao
LEFT JOIN su_ambulancias_viagens AS av ON av.codigo = ap.codviagem
LEFT JOIN un_unico AS prof ON prof.codigo = av.id_profissional
LEFT JOIN su_profissionais AS profissional ON profissional.codigo = av.id_profissional
LEFT JOIN su_procedimentos AS proced ON proced.codigo_procedimento = sv.codprocedimento_acompanhante2


public function get_paciente_faa($where, $orderby = "ap.codigo")
    {
        return $this->db->select("
              sv.codigo,
              sv.codprocedimento AS id_procedimento,
              sv.qntd_procedimento,
              av.id_profissional,
              av.datainicio,
              av.horainicio,
              proced.descricao AS descricao_procedimento,
              prof.nome AS nome_profissional,
              profissional.cod_cbo AS cbo_procedimento")
            ->from("su_ambulancia_passageiros ap")
            ->join("su_destino_viagem dv", "dv.codigo = ap.coddestino", "LEFT")
            ->join("su_solicitacao_viagem sv", "sv.codigo = ap.codsolicitacao", "LEFT")
            ->join("su_ambulancias_viagens av", "av.codigo = ap.codviagem", "LEFT")
            ->join("un_unico prof", "prof.codigo = prof.codigo = av.id_profissional", "LEFT")
            ->join("su_profissionais profissional", "profissional.codigo = av.id_profissional", "LEFT")
            ->join("su_procedimentos proced", "proced.codigo_procedimento = sv.codprocedimento", "LEFT")
            ->where($where)->order_by($orderby)->get()->result();
    }

    public function get_acompanhante_faa($where, $orderby = "ap.codigo")
    {
        return $this->db->select("
              sv.codigo,
              sv.codprocedimento_acompanhante AS id_procedimento,
              sv.qntd_procedimento_acompanhante AS qntd_procedimento,
              av.id_profissional,
              av.datainicio,
              av.horainicio,
              proced.descricao AS descricao_procedimento,
              prof.nome AS nome_profissional")
            ->from("su_ambulancia_passageiros ap")
            ->join("su_destino_viagem dv", "dv.codigo = ap.coddestino", "LEFT")
            ->join("su_solicitacao_viagem sv", "sv.codigo = ap.codsolicitacao", "LEFT")
            ->join("un_unico prof", "prof.codigo = ap.id_unico_acompanhante", "LEFT")
            ->join("su_ambulancias_viagens av", "av.codigo = ap.codviagem", "LEFT")
            ->join("su_procedimentos proced", "proced.codigo_procedimento = sv.codprocedimento_acompanhante", "LEFT")
            ->where($where)->order_by($orderby)->get()->result();
    }

    public function get_acompanhante2_faa($where, $orderby = "ap.codigo")
    {
        return $this->db->select("
              sv.codigo,
              sv.codprocedimento_acompanhante AS id_procedimento,
              sv.qntd_procedimento_acompanhante AS qntd_procedimento,
              av.id_profissional,
              av.datainicio,
              av.horainicio,
              proced.descricao AS descricao_procedimento,
              prof.nome AS nome_profissional")
            ->from("su_ambulancia_passageiros ap")
            ->join("su_destino_viagem dv", "dv.codigo = ap.coddestino", "LEFT")
            ->join("su_solicitacao_viagem sv", "sv.codigo = ap.codsolicitacao", "LEFT")
            ->join("su_ambulancias_viagens av", "av.codigo = ap.codviagem", "LEFT")
            ->join("un_unico prof", "prof.codigo = av.id_profissional", "LEFT")
            ->join("su_profissionais profissional", "profissional.codigo = av.id_profissional", "LEFT")
            ->join("su_procedimentos proced", "proced.codigo_procedimento = sv.codprocedimento_acompanhante2", "LEFT")
            ->where($where)->order_by($orderby)->get()->result();
    }



    public function agendamento_viagens_faa(): void
        {
            $data = (object)$this->input->post(null, true);

            $where = [
                "ap.codviagem"     => $data->codigo_viagem,
                " ap.id_unico_acompanhante"  => $data->codpaciente
            ];
            $data_get_acompanhante_faa = $this->su_ambulancias_viagens_model->get_acompanhante_faa($where);

    //        if($data->tipo == 'P'){
    //            $where = [
    //                "ap.codviagem"              => $data->codigo_viagem,
    //                "ap.id_unico_acompanhante"  => $data->codpaciente
    //            ];
    //            $data_get_acompanhante_faa = $this->get_paciente_faa->get_paciente_faa($where);
    //        }elseif($data->tipo == 'A'){
    //            $where = [
    //                "ap.codviagem"     => $data->codigo_viagem,
    //                " ap.codpaciente"  => $data->codpaciente
    //            ];
    //            $data_get_acompanhante_faa = $this->su_ambulancias_viagens_model->get_acompanhante_faa($where);
    //        }else{
    //            $where = [
    //                "ap.codviagem"               => $data->codigo_viagem,
    //                "ap.id_unico_acompanhante2"  => $data->codpaciente
    //            ];
    //            $data_get_acompanhante_faa = $this->su_ambulancias_viagens_model->get_acompanhante2_faa($where);
    //        }
    //        //var_dump($data_get_acompanhante_faa);
        }